# Java之SPI机制

https://www.cnblogs.com/googlemeoften/p/5715262.html

​    	Service Provider Interface，是为接口寻找服务实现类

​    （约定）当服务的提供者，提供了服务接口的一种实现之后，在jar包的META-INF/services/目录里同时创建一个以服务接口命名的文件。

​	基于这样一个约定就能很好的找到服务接口的实现类，而不需要再代码里制定





# Linux

top

查看系统的CPU、内存、运行时间、交换分区、执行的线程等信息

https://blog.csdn.net/csdn066/article/details/77171018

sar

https://blog.csdn.net/xusensen/article/details/54606401

iostat

https://www.cnblogs.com/ghj1976/p/5691857.html

df -h    用来检查linux服务器的文件系统的磁盘空间占用情况

https://www.cnblogs.com/jxhd1/p/6700300.html

ps -ef 和ps aux     显示系统进程的

https://www.linuxidc.com/Linux/2016-07/133515.htm

# Idea

### 快键键mac

command+shift+t生成测试代码类

# git

git remote add origin https://github.com/shaoXingZJU/notes.git    (本地仓库与远程关联)

git push -u origin master

git push --force (强行用本地将远程覆盖，最好不要使用)



# Maven   书籍《Maven实战》

### Maven工程类型

​	war包工程、Jar包工程、Pom工程

### pom文件

​	项目的基本坐标：groupId、artifcatId\version		

没有指定打包类型，则**默认jar类型**。运行mvn clean package ，打的包在target/输出目录下，其他项目就可以使用这个包。

### 依赖范围 scope

compile:编译依赖范围 （默认使用）。对于编译、测试、运行三种classpath都有效

test:测试依赖范围。只对测试classpath有效

provided:已提供依赖范围。编译和测试有效，但在运行时无效。典型的例子是			 			  					    servlet-api，运行时由于容器已经提供，所以不需要maven重复引入。

runtime:运行时依赖范围。测试和运行的classpath有效，编译时无效

system:系统依赖范围。和provided依赖范围一样，但是需通过systemPath元素显式地指定依赖文件的路径。

import:导入依赖范围。不会对三种classpath产生实际的影响



（学到83页）

### 生命周期和插件

​	maven的生命周期是抽象的，其实际行为都由插件来完成

​	Maven定义了三套生命周期：**clean、default、site**，每个生命周期都包含了一些阶段（phase）。三套生命周期相互独立，但各个生命周期中的phase却是有顺序的，且后面的phase依赖于前面的phase。执行某个phase时，其前面的phase会依顺序执行，但不会触发另外两套生命周期中的任何phase。

如mvn clean install  :调用clean生命周期的clean阶段和default生命周期的install阶段，他们之前的阶段也会执行

1 . 1 clean生命周期

1. pre-clean    ：执行清理前的工作；
2. clean    ：清理上一次构建生成的所有文件；
3. post-clean    ：执行清理后的工作

1 . 2 default生命周期

default生命周期是最核心的，它包含了构建项目时真正需要执行的所有步骤。

1. validate
2. initialize
3. generate-sources
4. process-sources：处理项目主资源文件。一般是对src/main/resources目录的内容进行变量替换等工作
5. generate-resources
6. process-resources
7. compile    ：编译项目的源代码；编译src/main/java
8. process-classes
9. generate-test-sources
10. process-test-sources
11. generate-test-resources
12. process-test-resources
13. test-compile    ：编译测试源代码；
14. process-test-classes
15. test    ：运行测试代码；
16. prepare-package
17. package    ：打包成jar或者war或者其他格式的分发包；
18. pre-integration-test
19. integration-test
20. post-integration-test
21. verify
22. install    ：将打好的包安装到**本地仓库**，供其他项目使用；
23. deploy    ：将打好的包安装到**远程仓库**，供其他项目使用；

1 . 3 site生命周期   目的是建立和发布项目站点

1. pre-site
2. site    ：生成项目的站点文档；
3. post-site
4. site-deploy    ：将生成的项目站点发布到服务器上

### 插件目标

​	maven核心仅仅定义了抽象的生命周期，具体的任务是交由插件完成的。

可以认为插件的每个功能就是一个插件目标

​	如clean:clean 代表clean插件的clean目标

### 插件绑定

​	maven的生命周期与插件相互绑定。具体是生命周期的阶段与插件的目标相互绑定，以完成某个具体的构建任务。

![image-20180909142408543](/var/folders/s5/d70ttx8d0md5w04pfktdfn0r0000gp/T/abnerworks.Typora/image-20180909142408543.png)

### snapshot快照版本和release发布版本

同样的版本和同样的坐标就意味着同样的构件。

如果本地仓库有，Maven就不会对照远程仓库进行更新。除非执行命令前先清除本地仓库，但这手工干预的做法显然不可取。开发中一直更新版本号也不可取，因为其他的模块可能会依赖于这个模块，就会涉及到很多的POM更改

**snapshot快照版本**：设定XX-SNAPSHOT发布，Maven会自动为构件打上**时间戳**.

​	有了时间戳，Maven会找构件XX-SNAPSHOT的最新版本，从仓库下载，默认情况Maven每天检查一次（由updatePolicy控制），页可以用-U参数强制让Maven检查更新，如mvn clean install-U

当项目经过完善的测试后，就可以将快照版本更改为发布版本，表示版本已经稳定，且只对应了唯一的构件。

项目不应该依赖于组织外部的快照版本，由于快照版本的不稳定性，这样的依赖会造成潜在的危险。



### 总结

maven中默认主代码目录src/main/java，测试代码目录是src/test/java

​	项目主目录放到src/main/java目录下（遵循Maven的约定），无需配置，Maven会自动搜寻项目的main函数。编译到target/classes目录下



